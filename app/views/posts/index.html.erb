<h1>Post list</h1>

<section class="posts-list">
  <div class="row row-cols-1 row-cols-md-2 g-4">
    <% @posts.each do |post| %>
      <div class="col-md-6">
        <div class="card border-info">
          <div class="row g-0">
            <div class="col-md-6">
              <% if post.images.attached? %>
                <%= image_tag post.images[0].variant(resize_to_fit: [400, 400]), class: 'img-fluid rounded-start' %>
              <% end %>
            </div>

            <div class="col-md-6">
              <div class="card-body">
                <h5 class="card-title">
                  <%= post.title %>
                </h5>
                <p class="card-text">
                  <small class="text-muted">
                    <%= "更新於：#{ post.updated_at.to_s(:long) }" %>
                  </small>
                </p>
              </div>
              <%= link_to '', post_path(post), class: 'stretched-link' %>
            </div>
          </div>
        </div>

        <div class="col-6">
          <% if current_user && policy(post).update? %>
            <%= link_to '刪除', post, method: :delete, data: { confirm: 'are you sure?' }, class: 'btn btn-danger' %>
            <%= link_to '編輯', edit_post_path(post), class: 'btn btn-success' %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</section>

